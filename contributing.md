# Contributing to Fingerprint Server Dotnet SDK

## Structure

Most files in the project are autogenerated by [openapi-generator](https://openapi-generator.tech).

- [template](./template) - folder contains redefined templates of `openapi-generator`. Original templates you can find in [openapi-generator repo](https://github.com/OpenAPITools/openapi-generator/tree/v7.19.0/modules/openapi-generator/src/main/resources/csharp).
- [docs](./docs) - generated documentation for models and [API Client](./docs/FingerprintApi.md).
- [src/Fingerprint.ServerSdk](./src/Fingerprint.ServerSdk) - API Client code is generated automatically.

## Code generation

You need `openapi-generator` to run code generation. There are many ways described in the [website](https://openapi-generator.tech/docs/installation).

You can just run `./generate.sh` script and it will do all the work.

To download fresh OpenAPI schema run `./sync.sh`

### Configuration

Project configuration is described in `config.json` file. To read about available parameters run the command below:

```shell
java -jar ./bin/openapi-generator-cli.jar config-help -g csharp
```

### Running tests

We have two type of tests:
- Unit tests, located in [src/Fingerprint.ServerSdk.Test](src/Fingerprint.ServerSdk.Test)
- Functional tests, that use real API located in [src/Fingerprint.ServerSdk.FunctionalTest](src/Fingerprint.ServerSdk.FunctionalTest)

To run tests you can use IDE instruments or just run:

```shell
dotnet test
```

### Testing the local source code of the SDK

We recommend using our [docker-compose.yml](docker-compose.yml) file for running the project locally. To do that:

1. Build the image used for running the project: `docker build --tag fingerprint-server-dotnet-sdk:latest ./`
2. Prepare env file based on the [.env.example](.env.example).
3. Run the example project: `docker compose run --rm example`. The `--rm` flag ensures the service is removed once the command completes execution.

### How to publish

We use [changesets](https://github.com/changesets/changesets) for handling release notes. If there are relevant changes, please add them to changeset via `pnpm exec changeset`. You need to run `pnpm install` before doing so.
After the release is created, the package is published to nuget by [publish.yml](.github/workflows/publish.yml) workflow.
