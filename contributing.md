# Contributing to Fingerprint Pro Server API SDK

## Structure

Most files in the project are autogenerated by [swagger-codegen](https://swagger.io/tools/swagger-codegen/).

- [template](./template) - folder contains redefined templates of `swagger-codegen`. Original templates you can find in [swagger-codegen repo](https://github.com/swagger-api/swagger-codegen-generators/tree/master/src/main/resources/handlebars/csharp).
- [docs](./docs) - generated documentation for models and [API Client](./docs/FingerprintApi.md).
- [src/FingerprintPro.ServerSdk](./src/FingerprintPro.ServerSdk) - API Client code is generated automatically.

## Code generation

You need `swagger-codegen` to run code generation. There are many ways described in the [readme](https://github.com/swagger-api/swagger-codegen).
In the project we use local jar file `swagger-codegen-cli.jar`.

You can just run `./generate.sh` script and it will do all the work.

To download fresh OpenAPI schema run `./sync.sh`

### Configuration

Project configuration is described in `config.json` file. To read about available parameters run the command below:

```shell
java -jar ./bin/swagger-codegen-cli.jar config-help -l csharp
```

### Running tests

We have two type of tests:
- Unit tests, located in [src/FingerprintPro.ServerSdk.Test](src/FingerprintPro.ServerSdk.Test)
- Functional tests, that use real API located in [src/FingerprintPro.ServerSdk.FunctionalTest](src/FingerprintPro.ServerSdk.FunctionalTest)

To run tests you can use IDE instruments or just run:

```shell
dotnet test
```

### Testing the local source code of the SDK

We recommend using our [docker-compose.yml](docker-compose.yml) file for running the project locally. To do that:

1. Build the image used for running the project: `docker build --tag fingerprint-pro-server-api-dotnet:latest ./`
2. Prepare env file based on the [.env.example](.env.example).
3. Run the example project: `docker compose run --rm example`

### How to publish

We use [changesets](https://github.com/changesets/changesets) for handling release notes. If there are relevant changes, please add them to changeset via `pnpm exec changeset`. You need to run `pnpm install` before doing so.
After the release is created, the package is published to nuget by [publish.yml](.github/workflows/publish.yml) workflow.
