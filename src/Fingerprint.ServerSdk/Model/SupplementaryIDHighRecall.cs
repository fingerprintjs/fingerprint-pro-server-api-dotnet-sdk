// <auto-generated>
/* 
 * Fingerprint Server API
 *
 * Fingerprint Server API allows you to search, update, and delete identification events in a server environment. It can be used for data exports, decision-making, and data analysis scenarios. Server API is intended for server-side usage, it's not intended to be used from the client side, whether it's a browser or a mobile device. 
 *
 * The version of the OpenAPI document: 4
 * Contact: support@fingerprint.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using Fingerprint.ServerSdk.Client;

namespace Fingerprint.ServerSdk.Model
{
    /// <summary>
    /// A supplementary browser identifier that prioritizes coverage over precision. The High Recall ID algorithm matches more generously, i.e., this identifier will remain the same even when there are subtle differences between two requests. This algorithm does not create as many new visitor IDs as the standard algorithms do, but there could be an increase in false-positive identification.
    /// </summary>
    public partial class SupplementaryIDHighRecall : IValidatableObject
    {


        /// <summary>
        /// Initializes a new instance of the <see cref="SupplementaryIDHighRecall" /> class.
        /// </summary>
        /// <param name="visitorId">String of 20 characters that uniquely identifies the visitor's browser or mobile device. (required).</param>
        /// <param name="visitorFound">Attribute represents if a visitor had been identified before. (required).</param>
        /// <param name="confidence">confidence.</param>
        /// <param name="firstSeenAt">Unix epoch time milliseconds timestamp indicating the time at which this ID was first seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 .</param>
        /// <param name="lastSeenAt">Unix epoch time milliseconds timestamp indicating the time at which this ID was last seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 .</param>
        [JsonConstructor]
        public SupplementaryIDHighRecall(string visitorId, bool visitorFound, Option<IdentificationConfidence> confidence = default, Option<long?> firstSeenAt = default, Option<long?> lastSeenAt = default)
        {
            VisitorId = visitorId;
            VisitorFound = visitorFound;
            ConfidenceOption = confidence;
            FirstSeenAtOption = firstSeenAt;
            LastSeenAtOption = lastSeenAt;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// String of 20 characters that uniquely identifies the visitor's browser or mobile device.
        /// </summary>
        /// <value>String of 20 characters that uniquely identifies the visitor's browser or mobile device.</value>
        [JsonPropertyName("visitor_id")]
        public string VisitorId { get; set; }

        /// <summary>
        /// Attribute represents if a visitor had been identified before.
        /// </summary>
        /// <value>Attribute represents if a visitor had been identified before.</value>
        [JsonPropertyName("visitor_found")]
        public bool VisitorFound { get; set; }

        /// <summary>
        /// Used to track the state of Confidence
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<IdentificationConfidence> ConfidenceOption { get; private set; }

        /// <summary>
        /// Gets or Sets Confidence
        /// </summary>
        [JsonPropertyName("confidence")]
        public IdentificationConfidence Confidence { get { return this.ConfidenceOption; } set { this.ConfidenceOption = new Option<IdentificationConfidence>(value); } }

        /// <summary>
        /// Used to track the state of FirstSeenAt
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<long?> FirstSeenAtOption { get; private set; }

        /// <summary>
        /// Unix epoch time milliseconds timestamp indicating the time at which this ID was first seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 
        /// </summary>
        /// <value>Unix epoch time milliseconds timestamp indicating the time at which this ID was first seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 </value>
        [JsonPropertyName("first_seen_at")]
        public long? FirstSeenAt { get { return this.FirstSeenAtOption; } set { this.FirstSeenAtOption = new Option<long?>(value); } }

        /// <summary>
        /// Used to track the state of LastSeenAt
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<long?> LastSeenAtOption { get; private set; }

        /// <summary>
        /// Unix epoch time milliseconds timestamp indicating the time at which this ID was last seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 
        /// </summary>
        /// <value>Unix epoch time milliseconds timestamp indicating the time at which this ID was last seen. example: `1758069706642` - Corresponding to Wed Sep 17 2025 00:41:46 GMT+0000 </value>
        [JsonPropertyName("last_seen_at")]
        public long? LastSeenAt { get { return this.LastSeenAtOption; } set { this.LastSeenAtOption = new Option<long?>(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            var sb = new StringBuilder();
            sb.Append("class SupplementaryIDHighRecall {\n");
            sb.Append("  VisitorId: ").Append(VisitorId).Append("\n");
            sb.Append("  VisitorFound: ").Append(VisitorFound).Append("\n");
            sb.Append("  Confidence: ").Append(Confidence).Append("\n");
            sb.Append("  FirstSeenAt: ").Append(FirstSeenAt).Append("\n");
            sb.Append("  LastSeenAt: ").Append(LastSeenAt).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="SupplementaryIDHighRecall" />
    /// </summary>
    public class SupplementaryIDHighRecallJsonConverter : JsonConverter<SupplementaryIDHighRecall>
    {
        /// <summary>
        /// Deserializes json to <see cref="SupplementaryIDHighRecall" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override SupplementaryIDHighRecall Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<string> visitorId = default;
            Option<bool?> visitorFound = default;
            Option<IdentificationConfidence> confidence = default;
            Option<long?> firstSeenAt = default;
            Option<long?> lastSeenAt = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "visitor_id":
                            visitorId = new Option<string>(utf8JsonReader.GetString());
                            break;
                        case "visitor_found":
                            visitorFound = new Option<bool?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (bool?)null : utf8JsonReader.GetBoolean());
                            break;
                        case "confidence":
                            confidence = new Option<IdentificationConfidence>(JsonSerializer.Deserialize<IdentificationConfidence>(ref utf8JsonReader, jsonSerializerOptions));
                            break;
                        case "first_seen_at":
                            firstSeenAt = new Option<long?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (long?)null : utf8JsonReader.GetInt64());
                            break;
                        case "last_seen_at":
                            lastSeenAt = new Option<long?>(utf8JsonReader.TokenType == JsonTokenType.Null ? (long?)null : utf8JsonReader.GetInt64());
                            break;
                        default:
                            break;
                    }
                }
            }

            if (!visitorId.IsSet)
                throw new ArgumentException("Property is required for class SupplementaryIDHighRecall.", nameof(visitorId));

            if (!visitorFound.IsSet)
                throw new ArgumentException("Property is required for class SupplementaryIDHighRecall.", nameof(visitorFound));

            if (visitorId.IsSet && visitorId.Value == null)
                throw new ArgumentNullException(nameof(visitorId), "Property is not nullable for class SupplementaryIDHighRecall.");

            if (visitorFound.IsSet && visitorFound.Value == null)
                throw new ArgumentNullException(nameof(visitorFound), "Property is not nullable for class SupplementaryIDHighRecall.");

            if (confidence.IsSet && confidence.Value == null)
                throw new ArgumentNullException(nameof(confidence), "Property is not nullable for class SupplementaryIDHighRecall.");

            if (firstSeenAt.IsSet && firstSeenAt.Value == null)
                throw new ArgumentNullException(nameof(firstSeenAt), "Property is not nullable for class SupplementaryIDHighRecall.");

            if (lastSeenAt.IsSet && lastSeenAt.Value == null)
                throw new ArgumentNullException(nameof(lastSeenAt), "Property is not nullable for class SupplementaryIDHighRecall.");

            return new SupplementaryIDHighRecall(visitorId.Value, visitorFound.Value.Value, confidence, firstSeenAt, lastSeenAt);
        }

        /// <summary>
        /// Serializes a <see cref="SupplementaryIDHighRecall" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="supplementaryIDHighRecall"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, SupplementaryIDHighRecall supplementaryIDHighRecall, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, supplementaryIDHighRecall, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="SupplementaryIDHighRecall" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="supplementaryIDHighRecall"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, SupplementaryIDHighRecall supplementaryIDHighRecall, JsonSerializerOptions jsonSerializerOptions)
        {
            if (supplementaryIDHighRecall.VisitorId == null)
                throw new ArgumentNullException(nameof(supplementaryIDHighRecall.VisitorId), "Property is required for class SupplementaryIDHighRecall.");

            if (supplementaryIDHighRecall.ConfidenceOption.IsSet && supplementaryIDHighRecall.Confidence == null)
                throw new ArgumentNullException(nameof(supplementaryIDHighRecall.Confidence), "Property is required for class SupplementaryIDHighRecall.");

            writer.WriteString("visitor_id", supplementaryIDHighRecall.VisitorId);

            writer.WriteBoolean("visitor_found", supplementaryIDHighRecall.VisitorFound);

            if (supplementaryIDHighRecall.ConfidenceOption.IsSet)
            {
                writer.WritePropertyName("confidence");
                JsonSerializer.Serialize(writer, supplementaryIDHighRecall.Confidence, jsonSerializerOptions);
            }
            if (supplementaryIDHighRecall.FirstSeenAtOption.IsSet)
                writer.WriteNumber("first_seen_at", supplementaryIDHighRecall.FirstSeenAtOption.Value.Value);

            if (supplementaryIDHighRecall.LastSeenAtOption.IsSet)
                writer.WriteNumber("last_seen_at", supplementaryIDHighRecall.LastSeenAtOption.Value.Value);
        }
    }
}
